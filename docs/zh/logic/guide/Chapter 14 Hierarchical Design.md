# 第 14 章 层次化设计

SailWind Logic 支持分层设计，您可以创建符号来表示整个子原理图，并在更高层次上展示系统交互性。您可以自上而下或自下而上创建层次结构。

## 分层设计概述

使用分层设计，您可以创建高级符号来表示复杂的子原理图或设计中的重复元素。您可以使用自上而下或自下而上的设计策略来创建层次结构。

• 自上而下 — 先定义层次符号，再定义底层逻辑。自下而上 — 创建原理图，然后定义原理图的层次符号。

您还可以在分层组件属性（第 296 页）对话框中分配或取消分配分层连接。

0 级是包含设计内容的顶级设计级别。编号从 1 到 1024 的工作表代表设计内容。SailWind Logic 设计的分层编号工作表总数不能超过 1024 个。

您可以使用视图菜单上的第 269 页上的“推送层次结构”和第 270 页上的“弹出层次结构”命令来导航层次结构。

复制分层符号时，所有现有的底层原理图内容也将被复制。SailWind Logic 会更新底层符号的参考指示器名称。分层符号与原理图图纸之间存在一一对应关系。复制的分层符号的底层逻辑将存储为唯一的图纸，并且可以在不影响其他分层符号逻辑的情况下进行编辑。即使复制了分层符号，其底层原理图也可能与复制符号的底层原理图完全不同。

## 创建自上而下的层次结构

在自上而下的设计中，您需要在底层原理图存在之前创建一个分层符号。这样您就可以创建容器对象，然后用较低层级的设计元素填充它。引脚名称将不同层级之间的信号关联起来。

SailWind Logic 将所有具有相同信号名称的实例（无论它们位于设计中的何处）绑定到单个连接网络中。通过在底层逻辑中使用相同的信号名称，您可以建立跨层次结构的连接。

**先决条件**

确保底层原理图中的页外信号与分层符号中的引脚名称一致。

**程序**

1. 在“逻辑示意图编辑”工具栏上，单击“新建层次符号”按钮。
2. 在分层符号向导对话框的分层工作表区域中，在工作表名称文本框中键入符号名称。
3. 从相应的下拉列表框中为输入和输出引脚选择您喜欢的引脚封装。
4. 指定输入和输出引脚的引脚数。预览区域显示符号轮廓。
5. 点击“确定”。分层符号将出现在第 109 页的“元件编辑器”窗口中。

> [!TIP]
由于该符号是分层符号，因此没有引脚编号。与分层符号的引脚关联的引脚名称标识了与该引脚绑定的连接的网络名称。分层符号上的所有引脚都必须有引脚名称。只有为每个引脚分配名称后，分层符号才能完成。

1. 在元件编辑器中，双击每个引脚以打开位于第 131 页的“端子属性”对话框，您可以在其中命名选定的引脚。您必须为符号的每个引脚命名。
2. 单击文件 \> 完成菜单项。

这将关闭元件编辑器，并将新符号附加到光标上。

1. 将光标移动到所需位置并单击以将符号放置在原理图中。
2. 您可以使用“查看 \> “ 推送层次结构”和“查看 \> “ 弹出层次结构”菜单命令来导航此层次结构。

**相关主题**

创建自下而上的层次结构

## 创建自下而上的层次结构

在自下而上的设计中，您可以从现有的工作表创建一个分层符号来表示底层逻辑。这使您能够创建较低级别的设计，然后将其包装在分层符号中。

SailWind Logic 会在原理图图纸上为每个页外引用的符号中添加一个输入或输出引脚。SailWind Logic 将引脚类型为“源”的页外引用放置在分层符号的左侧，将引脚类型为“负载”的页外引用放置在右侧。（页外引用的引脚类型在电气库中定义。）

**程序**

1. 切换到要添加分层符号的图纸。如果需要，请使用“设置”菜单\> 向图纸集添加新的原理图图纸。
2. 在“逻辑示意图编辑”工具栏上，单击“新建层次符号”按钮。
3. 在“分层符号向导”对话框中，从“分层工作表”部分的“工作表编号”下拉列表框中选择一个现有工作表。
4. 在工作表名称文本框中输入符号的名称。
5. 从相应的下拉列表框中为输入和输出引脚选择您喜欢的引脚封装。

预览区域显示符号轮廓。符号上的输入/输出引脚数量将根据底层原理图图纸上的表外参考符号的数量和类型自动设置，并且引脚数框不可编辑。

1. 单击“确定”。

分层符号将出现在第 109 页的“元件编辑器”窗口中。符号上有一个输入或输出引脚，用于匹配底层原理图图纸上的每个页外引用。

1. 单击文件 \> 完成菜单项。

这将关闭元件编辑器，并将新符号附加到光标上。

1. 将光标移动到所需位置并单击以将符号放置在原理图中。
2. 您可以使用“查看 \> “推送层次结构”和“查看 \> “弹出层次结构”菜单命令来导航此层次结构。

**相关主题**

创建自上而下的层次结构

## 推进等级制度

使用 Push Hierarchy 命令查看内部或向下推入分层符号以查看底层逻辑。

**程序**

1. 单击“视图 \> “推送层次结构”菜单项。
2. 选择层次符号。

或者，您可以选择层次结构符号，右键单击，然后单击“推送层次结构”。

0 提示 如果所选符号没有底层示意图，则会出现一张空白表。

## 弹出层次结构

使用 Pop Hierarchy 命令将当前工作表替换为其相应的层次符号。

**程序**

在分层子示意图中，单击“查看 \> 弹出层次结构菜单项。

> [!TIP]
 在主工具栏上的 Sheets 列表中，子示意图以缩进的图标显示。

## 修改分层符号

创建后，您可以修改分层符号以添加或减少设计细节。

**程序**

1. 选择一个分层符号，单击鼠标右键，然后单击“编辑分层符号”。
2. 在第 109 页的元件编辑器中修改符号。
3. 完成更改后，单击文件 \> 完成菜单项。

> [!TIP]
如果将端子添加到分层符号，请确保为它们提供引脚名称，并且这些名称也作为页面外引用出现在具有底层原理图的图纸中。

**相关主题**

层次符号向导对话框删除层次符号

## 复制分层符号

复制分层符号时，该符号引用的图纸也会被复制并作为新图纸添加到原理图中。SailWind Logic 会为复制图纸中的元件类型分配新的参考指示符。如果引用的图纸也包含分层符号，则 SailWind

逻辑还将这些符号所引用的工作表复制下来，依此类推，直到层次结构的整个子树。

**程序**

1. 选择设计中的符号。

在复制模式下选择分层符号时，会出现警告提示。如果在提示窗口中单击“是”，SailWind Logic 将复制该分层符号以及所有直接或间接引用的图纸。如果引用了任何已编号的图纸，SailWind Logic 会为副本分配新的图纸编号。

1. Ctr $^+$ 拖动副本。
2. 在警告提示中，单击“是”。符号副本将附加到光标处。
3. 单击放置符号。

**相关主题**

层次符号向导对话框修改层次符号删除层次符号

## 删除分层符号

您可以删除分层符号，但执行此操作时要小心。

**程序**

1. 在逻辑示意图编辑工具栏上，单击删除按钮。
2. 在删除模式下选择分层符号时，会显示“确定删除与该分层符号关联的工作表 - 警告：此操作无法撤消”消息。确认命令之前，请确保您的意图。如果单击“是”，SailWind Logic 将删除该分层符号以及整个分层符号中所有关联的工作表。• 如果单击“否”，并且该分层符号没有工作表编号，SailWind Logic 将分配下一个未使用的工作表编号，使其成为一个普通的编号工作表。

